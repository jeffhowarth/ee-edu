
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A pattern book for spatial analysis and image processing with Google Earth Engine. ">
      
      
        <meta name="author" content="Jeff Howarth">
      
      
        <link rel="canonical" href="https://github.com/jeffhowarth/ee-patterns/patterns/local-operations/">
      
      
        <link rel="prev" href="../scalar-operations/">
      
      
        <link rel="next" href="../focal-operations/">
      
      <link rel="icon" href="../../assets/myIcon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>local operations - ee-patterns</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Helvetica:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Helvetica";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#local-operations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ee-patterns" class="md-header__button md-logo" aria-label="ee-patterns" data-md-component="logo">
      
  <img src="../../assets/myIcon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ee-patterns
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              local operations
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jeffhowarth/ee-patterns" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    jeffhowarth/ee-patterns
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ee-patterns" class="md-nav__button md-logo" aria-label="ee-patterns" data-md-component="logo">
      
  <img src="../../assets/myIcon.png" alt="logo">

    </a>
    ee-patterns
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jeffhowarth/ee-patterns" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    jeffhowarth/ee-patterns
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        title page
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../intro/" class="md-nav__link">
        introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../three-t/" class="md-nav__link">
        the three Ts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../geo-module/" class="md-nav__link">
        geo module
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          PATTERNS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          PATTERNS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../javascript/" class="md-nav__link">
        javascript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../explain-code/" class="md-nav__link">
        explain code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gather-raster-data/" class="md-nav__link">
        gather raster data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gather-vector-data/" class="md-nav__link">
        gather vector data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../map-raster-layers/" class="md-nav__link">
        map raster as layers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../RGB-composites/" class="md-nav__link">
        RGB composites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../map-vector-layers/" class="md-nav__link">
        map vector as layers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../explain-symbology/" class="md-nav__link">
        explain symbology
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../customize-Map/" class="md-nav__link">
        customize Map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../filter-collections/" class="md-nav__link">
        filter collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../composite-mosaic/" class="md-nav__link">
        flatten collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../convert-data/" class="md-nav__link">
        convert data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reclassify/" class="md-nav__link">
        reclassify raster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scalar-operations/" class="md-nav__link">
        scalar operations
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          local operations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        local operations
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#masks" class="md-nav__link">
    masks
  </a>
  
    <nav class="md-nav" aria-label="masks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mask-pixels" class="md-nav__link">
    mask pixels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self-mask-pixels" class="md-nav__link">
    self mask pixels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unmask" class="md-nav__link">
    unmask
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logical-comparisons" class="md-nav__link">
    logical comparisons
  </a>
  
    <nav class="md-nav" aria-label="logical comparisons">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    union
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intersection" class="md-nav__link">
    intersection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not" class="md-nav__link">
    not
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map-arithmetic" class="md-nav__link">
    map arithmetic
  </a>
  
    <nav class="md-nav" aria-label="map arithmetic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addition" class="md-nav__link">
    addition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtraction" class="md-nav__link">
    subtraction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiplication" class="md-nav__link">
    multiplication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#division" class="md-nav__link">
    division
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral-indices" class="md-nav__link">
    spectral indices
  </a>
  
    <nav class="md-nav" aria-label="spectral indices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ndvi" class="md-nav__link">
    NDVI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nbr" class="md-nav__link">
    NBR
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awesome-spectral-indices-module" class="md-nav__link">
    awesome spectral indices module
  </a>
  
    <nav class="md-nav" aria-label="awesome spectral indices module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#load-module" class="md-nav__link">
    load module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-parameters" class="md-nav__link">
    define parameters
  </a>
  
    <nav class="md-nav" aria-label="define parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#l5-l7" class="md-nav__link">
    L5 &amp; L7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l8-l9" class="md-nav__link">
    L8 &amp; L9
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s2" class="md-nav__link">
    S2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compute-spectral-indices" class="md-nav__link">
    compute spectral indices
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../focal-operations/" class="md-nav__link">
        focal (neighborhood) operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../proximity-operations/" class="md-nav__link">
        proximity operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../zonal-operations/" class="md-nav__link">
        zonal operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vector-operations/" class="md-nav__link">
        vector operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../terrain/" class="md-nav__link">
        terrain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../time-series/" class="md-nav__link">
        time series
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../export/" class="md-nav__link">
        export data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ui-design/" class="md-nav__link">
        ui design
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          STARTERS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          STARTERS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../starters/landsat/" class="md-nav__link">
        Landsat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../starters/MODIS/" class="md-nav__link">
        MODIS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../starters/NAIP/" class="md-nav__link">
        NAIP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../starters/sentinel/" class="md-nav__link">
        Sentinel
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          PROBLEMS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          PROBLEMS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-01/" class="md-nav__link">
        T1. A sketch map from lidar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-01/" class="md-nav__link">
        P1. Memory under cover
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-02/" class="md-nav__link">
        T2. A slippy topographic map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-02/" class="md-nav__link">
        P2. Ice age bathtub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-03/" class="md-nav__link">
        T3. Intro to feature collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-03/" class="md-nav__link">
        P3. Parent materials of soils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-04/" class="md-nav__link">
        T4. Forest blocks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-04/" class="md-nav__link">
        P4. Forest blocks and habitat connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-05/" class="md-nav__link">
        T5. Scale in web mercator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-05/" class="md-nav__link">
        P5. Land use in watershed riparian zones
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/troubleshooting/" class="md-nav__link">
        TS. Troubleshooting errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-06/" class="md-nav__link">
        P6. Changes in the night
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-07/" class="md-nav__link">
        T7. NAIP Explorer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-07/" class="md-nav__link">
        P7. Swipe map app
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-08/" class="md-nav__link">
        T8. Landsat snapshots
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-08/" class="md-nav__link">
        P8. Swipe map app (2)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-09/" class="md-nav__link">
        T9. Spectral indices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-09/" class="md-nav__link">
        P9. CZU burn severity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/tutorial-10/" class="md-nav__link">
        T10. Drought mapping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../problems/practice-10/" class="md-nav__link">
        P10. Memories of urban environments
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          SOLUTIONS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          SOLUTIONS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../solutions/tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../solutions/practice/" class="md-nav__link">
        Practice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../solutions/error-glossary/" class="md-nav__link">
        Error Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#masks" class="md-nav__link">
    masks
  </a>
  
    <nav class="md-nav" aria-label="masks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mask-pixels" class="md-nav__link">
    mask pixels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self-mask-pixels" class="md-nav__link">
    self mask pixels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unmask" class="md-nav__link">
    unmask
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logical-comparisons" class="md-nav__link">
    logical comparisons
  </a>
  
    <nav class="md-nav" aria-label="logical comparisons">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    union
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intersection" class="md-nav__link">
    intersection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not" class="md-nav__link">
    not
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map-arithmetic" class="md-nav__link">
    map arithmetic
  </a>
  
    <nav class="md-nav" aria-label="map arithmetic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addition" class="md-nav__link">
    addition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtraction" class="md-nav__link">
    subtraction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiplication" class="md-nav__link">
    multiplication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#division" class="md-nav__link">
    division
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral-indices" class="md-nav__link">
    spectral indices
  </a>
  
    <nav class="md-nav" aria-label="spectral indices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ndvi" class="md-nav__link">
    NDVI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nbr" class="md-nav__link">
    NBR
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awesome-spectral-indices-module" class="md-nav__link">
    awesome spectral indices module
  </a>
  
    <nav class="md-nav" aria-label="awesome spectral indices module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#load-module" class="md-nav__link">
    load module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-parameters" class="md-nav__link">
    define parameters
  </a>
  
    <nav class="md-nav" aria-label="define parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#l5-l7" class="md-nav__link">
    L5 &amp; L7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l8-l9" class="md-nav__link">
    L8 &amp; L9
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s2" class="md-nav__link">
    S2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compute-spectral-indices" class="md-nav__link">
    compute spectral indices
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p><strong>PATTERNS</strong></p>
<h1 id="local-operations"><em><strong>local operations</strong></em></h1>
<p>Local overlay methods compare values at pixels in one or more rasters.    </p>
<p><img alt="local-overlay-operations" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/local-operations-basics.png" /></p>
<hr />
<h2 id="masks"><strong>masks</strong></h2>
<p>Masks act like masking tape when you paint. When you mask pixels in a raster before displaying the raster as a map layer, all the pixels with the mask will remain transparent (they will not be displayed with a color). Similarly, when you mask pixels of an input raster in an operation, the masked pixels will be excluded from the computation.  </p>
<p>Typically, workflows with masks involve three steps.    </p>
<p><center></p>
<pre class="mermaid"><code>graph LR
  step01("Make mask")
  step02("Apply mask") ;
  step03("Paint (display as layer)") ;
  step04("Transform (input in operation)") ;


  step01 --&gt; step02
  step02 --&gt; step03
  step02 --&gt; step04


  classDef steps fill:#C9C3E6,stroke-width:1px,stroke: #00000000, color:#000000; 



  class step01 steps; 
  class step02 steps;
  class step03 steps;
  class step04 steps; </code></pre>
<p></center></p>
<h3 id="mask-pixels"><strong>mask pixels</strong></h3>
<p>This pattern uses another raster, typically a <a href="../reclassify/#boolean-raster">Boolean raster</a> as a mask on another raster. </p>
<p>Any pixel with the value 0 in the mask acts like masking tape and prevents numbers in the output raster from being painted at that location. Masked values will not be displayed with colors when you place the raster layer on a Map. Masked values in an input raster will also be ignored in any subsequent operation.    </p>
<p><img alt="mask" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/mask.png" /></p>
<hr />
<p><center></p>
<pre class="mermaid"><code>graph LR
  input[image]
  method(".updateMask()") ;
  output[/"image_with_mask"/]  ;
  arg01["mask&lt;br&gt;boolean_raster"] ;

  input --&gt; method
  method --&gt; output
  arg01 --o method


  classDef in-out fill:#FFFFFF,stroke-width:1px,stroke: #000000, color:#000000; 
  classDef op fill:#000000,stroke-width:0px,color:#FFFFFF;
  classDef arg fill:#CCCCCC,stroke-width:0px,color:#000000;


  class input in-out; 
  class method op;
  class output in-out;
  class arg01 arg; </code></pre>
<p></center></p>
<hr />
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_with_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image</span><span class="p">.</span><span class="nx">updateMask</span><span class="p">(</span><span class="nx">boolean_image</span><span class="p">);</span>
</code></pre></div>
<hr />
<h3 id="self-mask-pixels"><strong>self mask pixels</strong></h3>
<p>If you want to ignore pixels that store the value 0 in an raster, you can self-mask. This is not technically a local operation because it only involves one raster, but I wanted to keep the mask operations together. </p>
<p><img alt="self mask" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/self-mask.png" /></p>
<hr />
<p><center></p>
<pre class="mermaid"><code>graph LR
  input[image]
  method(".selfMask()") ;
  output[/"image_with_mask"/]  ;

  input --&gt; method
  method --&gt; output


  classDef in-out fill:#FFFFFF,stroke-width:1px,stroke: #000000, color:#000000; 
  classDef op fill:#000000,stroke-width:0px,color:#FFFFFF;
  classDef arg fill:#CCCCCC,stroke-width:0px,color:#000000;


  class input in-out; 
  class method op;
  class output in-out;</code></pre>
<p></center></p>
<hr />
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_with_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image</span><span class="p">.</span><span class="nx">selfMask</span><span class="p">();</span>
</code></pre></div>
<hr />
<h3 id="unmask"><strong>unmask</strong></h3>
<p>If you are working with a masked image, you can remove the mask and populate all the masked locations with a constant. Again, this is not technically a local operation because it only involves one raster, but I wanted to keep the mask operations together. </p>
<p><img alt="self mask" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/unmask.png" /></p>
<hr />
<hr />
<p><center></p>
<pre class="mermaid"><code>graph LR
  input["image_with_mask"]
  method(".unmask()") ;
  output[/"image_without_mask"/]  ;
  arg["constant"]

  input --&gt; method
  method --&gt; output
  arg --o method  

  classDef in-out fill:#FFFFFF,stroke-width:1px,stroke: #000000, color:#000000; 
  classDef op fill:#000000,stroke-width:0px,color:#FFFFFF;
  classDef arg fill:#CCCCCC,stroke-width:0px,color:#000000;

  class input in-out; 
  class method op;
  class output in-out;
  class arg arg</code></pre>
<p></center></p>
<hr />
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_without_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image_with_mask</span><span class="p">.</span><span class="nx">unmask</span><span class="p">();</span>
</code></pre></div>
<hr />
<p>In Earth Engine, <code>unmask()</code> will replace masked values with 0 by default (This makes the method the inverse of <code>selfMask()</code>. You can include an argument (a number in the parantheses) to specify a different constant.   </p>
<hr />
<h2 id="logical-comparisons"><strong>logical comparisons</strong></h2>
<p>The diagram below illustrates three common logical comparisons between two regions: A, B. Going from left to right, the first picture shows the two regions. The second picture shows where either region A <strong>or</strong> region B are present (or true), called the <strong>union</strong> of the two. The third picture shows where both region A <strong>and</strong> region B are present, called the <strong>intersection</strong> of the two. The fourth and final picture shows where region A is present but <strong>not</strong> region B. In this last case, region B acts like an eraser or <strong>knife</strong> that cuts out the portion of region A that it touches. Sometimes this last case is called the <em>difference</em> or <em>subtraction</em> of two sets.    </p>
<p><img alt="Logical comparisons" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/logical-comparisons.png" /></p>
<hr />
<p>The patterns below describe how each logical comparison shown above can be implemented with raster data models.  </p>
<hr />
<h3 id="union"><strong>union</strong></h3>
<p>The <code>.or()</code> method takes two rasters as inputs and kicks out a boolean raster that represents their <strong>union</strong>: pixels in the output raster are true if they are true (not 0) in either raster A or raster B.  </p>
<p><img alt="OR union" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/or-union.png" /></p>
<hr />
<p>The inputs are commonly <strong>boolean rasters</strong>, as illustrated in the above diagram, but the method will work with nominal (class) data, returning a boolean raster.  </p>
<p><img alt="OR union nominal case" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/or-nominal-case.png" /></p>
<hr />
<p>The order of the inputs (which raster is image_A versus image_B) does not really matter. The main thing to remember here is that any masked pixels will be excluded from this operation. So it is good practice to triple-check your inputs to see if you are using a mask on pixels that should be zeros so that you do not inadvertently erase locations that are true in one layer but masked in another.  </p>
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_union</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image_A</span><span class="p">.</span><span class="nx">or</span><span class="p">(</span><span class="nx">image_B</span><span class="p">);</span>
</code></pre></div>
<h3 id="intersection"><strong>intersection</strong></h3>
<p>The <code>and()</code> method takes two rasters as inputs and kicks out a boolean raster that represents their <strong>intersection</strong>: pixels in the output raster are true (not 0) if they are true (not zero) in both raster A and raster B.  </p>
<p><img alt="AND intersection" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/and-intersection.png" /></p>
<hr />
<p>Like the <code>or</code> operation, the inputs are commonly <strong>boolean rasters</strong>, but the method will work with nominal (class) data, returning a boolean raster as shown below.  </p>
<p><img alt="AND nominal case" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/and-nominal-case.png" /></p>
<hr />
<p>The order of inputs again does not really matter here. And because this operation is like a <strong>knife</strong> that cuts and alters the shapes of inputs, this method is less sensitive to masks, unlike the <code>or()</code> method.</p>
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_intersection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image_A</span><span class="p">.</span><span class="nx">and</span><span class="p">(</span><span class="nx">image_B</span><span class="p">);</span>
</code></pre></div>
<hr />
<h3 id="not"><strong>not</strong></h3>
<p>In Earth Engine, finding locations that are in raster A but not in raster B is a little tricky. The workflow involves inverting the binary of raster_B and then multiplying it against raster_A.   </p>
<p><img alt="NOT" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/not.png" /></p>
<hr />
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_A_not_B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image_A</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">image_B_inverted_binary</span><span class="p">);</span>
</code></pre></div>
<h2 id="map-arithmetic"><strong>map arithmetic</strong></h2>
<p>As the diagram at the top of this page illustrates, a common type of local overlay operation performs arithmetic operations (addition, subtraction, multiplication, and division) with two rasters.  </p>
<hr />
<h3 id="addition"><strong>addition</strong></h3>
<p>The <code>.add()</code> method performs addition between values in corresponding pixels of two rasters. The order (which raster is A versus B) does not matter. The main thing to remember is that any pixel that is masked will be excluded from the operation (so that output pixel will remain masked).  </p>
<p><img alt="local-overlay-operations" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/add.png" /></p>
<hr />
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_A_add_B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image_A</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">image_B</span><span class="p">);</span>
</code></pre></div>
<hr />
<h3 id="subtraction"><strong>subtraction</strong></h3>
<p>The <code>.subtract()</code> method performs subtraction between values in corresponding pixels of two rasters. The order matters here: you subtract image_B from image_A. Masked pixels in either raster will remain masked in the output.  </p>
<p><img alt="local-overlay-operations" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/subtract.png" /></p>
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_A_subtract_B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image_A</span><span class="p">.</span><span class="nx">subtract</span><span class="p">(</span><span class="nx">image_B</span><span class="p">);</span>
</code></pre></div>
<hr />
<h3 id="multiplication"><strong>multiplication</strong></h3>
<p>The <code>.multiply()</code> method performs multiplication between values in corresponding pixels of two rasters. The order does not matter here. Masked pixels do matter and will remain masked. </p>
<p>Multiplication is often used with a boolean raster as a method to <strong>erase</strong> values in another image, because 0 will convert to 0 and 1 will retain the original value.   </p>
<p><img alt="local-overlay-operations" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/multiply.png" /></p>
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_A_subtract_B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image_A</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">image_B</span><span class="p">);</span>
</code></pre></div>
<hr />
<h3 id="division"><strong>division</strong></h3>
<p>The <code>.divide()</code> method performs division between values in corresponding pixels of the two rasters. The order does matter here because you divide the values in image_A by the values in image_B. Masked pixels in either image again remain masked in the output.  </p>
<p><img alt="local-overlay-operations" src="https://geography.middlebury.edu/howarth/ee_edu/eePatterns/localOperations/divide.png" /></p>
<div class="language-js highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">image_A_divide_B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">image_A</span><span class="p">.</span><span class="nx">divide</span><span class="p">(</span><span class="nx">image_B</span><span class="p">);</span>
</code></pre></div>
<h2 id="spectral-indices"><strong>spectral indices</strong></h2>
<p>Spectral indices are derived from local operations that compare values in two or more spectral bands. There are many, many different indices. Below I describe two indices that we will use in tutorial 9 and problem 9.  </p>
<h3 id="ndvi"><strong>NDVI</strong></h3>
<p>The normalized difference vegetation index (NDVI) is a measure of the health of vegetation. It is calculated by comparing reflectance of near infrared (NIR) light and red light.  </p>
<hr />
<p><img alt="ndvi" src="https://gsp.humboldt.edu/olm/Courses/GSP_216/images/ndvi-formula.jpg" />  </p>
<hr />
<p>This takes advantage of the difference in the spectral signatures of healthy versus stressed or dead vegetation; specifically, healthy vegetation will have higher reflectance in the NIR band due to cell structure and lower reflectance in red bands due to absorption by chlorophyll.  </p>
<hr />
<p><img alt="ndvi-signature" src="https://ageagle.com/wp-content/uploads/micasense/2018/12/0051a-1cdzv0-ekhkg7odew-dorlw.png" /></p>
<p>NDVI values will range from -1 to 1. Although results will vary by region, year, and instrument, here are some ballpark numbers to help interpret NDVI values:  </p>
<ul>
<li>0 or less: water </li>
<li>0 - 0.15: impervious surfaces, rock, sand, or snow  </li>
<li>0.15 - 0.33: sparse and/or stressed vegetation  </li>
<li>0.33 - 0.66: moderatly healthy vegetation</li>
<li>0.66 - 1: dense and/or healthy vegetation</li>
</ul>
<hr />
<h3 id="nbr"><strong>NBR</strong></h3>
<p>The normalized burn ratio (NBR) is a measure of the severity of a fire. It is calculated by comparing reflectance of near infrared (NIR) and shortwave infrared (SWIR) light. </p>
<p><img alt="nbr" src="https://d33v4339jhl8k0.cloudfront.net/docs/assets/637d3085483e942ba866b26e/images/64beb4b357a4e8315e721be1/file-kTlMWj8ckP.png" />  </p>
<p><a href="nbr-source" target="_blank"><em>source</em></a></p>
<hr />
<p>This takes advantage of differences in the spectral signatures of healthy and burned vegetation.</p>
<hr />
<p><img alt="nbr signatures" src="https://d33v4339jhl8k0.cloudfront.net/docs/assets/637d3085483e942ba866b26e/images/64beb58957a4e8315e721be2/file-BCK9LN3KVT.png" /></p>
<hr />
<h2 id="awesome-spectral-indices-module"><strong>awesome spectral indices module</strong></h2>
<p>Although you can compute most spectral indices from scratch in Earth Engine, I appreciate using a module developed by <a href="https://github.com/davemlz" target="_blank">Dave Montero Loaiza</a> that is&hellip; pretty&hellip; <a href="https://github.com/awesome-spectral-indices/awesome-spectral-indices" target="_blank">awesome</a>.  </p>
<p>Here are the steps for using his module.  </p>
<hr />
<h3 id="load-module"><strong>load module</strong></h3>
<div class="language-js highlight"><pre><span></span><code><span class="c1">// ------------------------------------------------------------------------</span>
<span class="c1">//  Load spectral indices module.  </span>
<span class="c1">// ------------------------------------------------------------------------</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">spectral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;users/dmlmont/spectral:spectral&quot;</span><span class="p">);</span>

<span class="nx">print</span><span class="p">(</span>
<span class="w">  </span><span class="s2">&quot;SPECTRAL INDICES&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="nx">spectral</span><span class="p">.</span><span class="nx">indices</span>
<span class="p">);</span>
</code></pre></div>
<hr />
<h3 id="define-parameters"><strong>define parameters</strong></h3>
<p>This will depend on which data product you are using from the Earth Engine Data catalog and based on <a href="https://github.com/awesome-spectral-indices/awesome-spectral-indices?tab=readme-ov-file#expressions" target="_blank">this table</a> from Dave&rsquo;s github docs.   </p>
<p><strong>Please note:</strong> this pattern is set up to work directly from the image starter scripts for <a href="../../starters/landsat/">Landsat</a> and <a href="../../starters/sentinel/">Sentinel</a>. That is why the input image is called <code>output</code>. If you are trying to compare indices at two different snapshots in time, you may have changed the name of your image and will need to insert a line that temporarily renames your image. Otherwise EE will likely throw a &ldquo;Line ###: output is not defined&rdquo; error message.  </p>
<div class="language-js highlight"><pre><span></span><code><span class="c1">// Temporarily rename the input image to work with pattern.</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">target_input</span><span class="p">;</span><span class="w">  </span><span class="c1">// Change &quot;target_input&quot; to the name of image you want to use as the input. </span>
</code></pre></div>
<h4 id="l5-l7"><strong>L5 &amp; L7</strong></h4>
<p>For Landsat 5 or 7 Surface Reflectance, use this pattern:</p>
<div class="language-js highlight"><pre><span></span><code><span class="c1">// ------------------------------------------------------------------------</span>
<span class="c1">//  Define parameters for Landsat 5 or 7 Surface Reflectance. </span>
<span class="c1">// ------------------------------------------------------------------------</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;B&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B1&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;G&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B2&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;R&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B3&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;N&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B4&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;S1&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B5&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;S2&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B7&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;T&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B6&quot;</span><span class="p">)</span>
<span class="p">};</span>
</code></pre></div>
<hr />
<h4 id="l8-l9"><strong>L8 &amp; L9</strong></h4>
<p>For Landsat 8 or 9, use this pattern:</p>
<hr />
<div class="language-js highlight"><pre><span></span><code><span class="c1">// ------------------------------------------------------------------------</span>
<span class="c1">//  Define parameters for Landsat 8 or 9 Surface Reflectance. </span>
<span class="c1">// ------------------------------------------------------------------------</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;A&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B1&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;B&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B2&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;G&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B3&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;R&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B4&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;N&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B5&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;S1&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B6&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;S2&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B7&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;T1&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B10&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;T2&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;SR_B11&quot;</span><span class="p">)</span>
<span class="p">};</span>
</code></pre></div>
<hr />
<h4 id="s2"><strong>S2</strong></h4>
<p>For Sentinel 2, use this pattern:</p>
<hr />
<div class="language-js highlight"><pre><span></span><code><span class="c1">// ------------------------------------------------------------------------</span>
<span class="c1">//  Define parameters for Sentinel 2 Surface Reflectance. </span>
<span class="c1">// ------------------------------------------------------------------------</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;A&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B1&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;B&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B2&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;G&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B3&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;R&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B4&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;RE1&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B5&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;RE2&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B6&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;RE3&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B7&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;N&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B8&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;N2&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B8A&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;WV&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B9&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;S1&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B11&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="s2">&quot;S2&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">output</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;B12&quot;</span><span class="p">)</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="compute-spectral-indices"><strong>compute spectral indices</strong></h3>
<p>You can compute one or more indices with this pattern. This example computes NDVI, NBR, and MNDWI. Each index will be stored as a new band in the output image.  </p>
<div class="language-js highlight"><pre><span></span><code><span class="c1">// ------------------------------------------------------------------------</span>
<span class="c1">//  Compute spectral index or indices.</span>
<span class="c1">// ------------------------------------------------------------------------</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">output_si</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">spectral</span><span class="p">.</span><span class="nx">computeIndex</span><span class="p">(</span><span class="nx">output</span><span class="p">,[</span><span class="s2">&quot;NDVI&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;NBR&quot;</span><span class="p">],</span><span class="w"> </span><span class="nx">parameters</span><span class="p">);</span>

<span class="nx">print</span><span class="p">(</span>
<span class="w">  </span><span class="s2">&quot;IMAGE WITH SPECTRAL INDICES&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">output_si</span><span class="p">);</span>
</code></pre></div>
<hr />
<hr />
<p xmlns:cc="http://creativecommons.org/ns#" >This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" alt=""></a></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../scalar-operations/" class="md-footer__link md-footer__link--prev" aria-label="Previous: scalar operations" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                scalar operations
              </div>
            </div>
          </a>
        
        
          
          <a href="../focal-operations/" class="md-footer__link md-footer__link--next" aria-label="Next: focal (neighborhood) operations" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                focal (neighborhood) operations
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Jeff Howarth
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/jeffhowarth" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/jeffgeographer" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.indexes", "navigation.footer", "content.code.copy"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>